{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.12/css/bootstrap-select.min.css">
{% endblock %}


{% block body %}

    <div class="container">
        <div class="row">
            <div class="col-4 sticky-column">
                <div class="sticky-top">
                    <h1>University Rankings</h1>
                    <p>The dashboard provides comprehensive insights into global university rankings, featuring data on
                        institutions and scores. Users can select specific features from a dropdown menu, enabling them
                        to view both institution and location rankings dynamically. A bar chart displays universities,
                        allowing users to select a specific institution, which is then showcased on a map for detailed
                        visualization. Additionally, the dashboard allows users to refine their search by selecting a
                        location on a separate bar chart, displaying only the institutions from the chosen area. This
                        interactive platform offers a user-friendly experience for exploring global university data and
                        understanding rankings in depth.</p>
                    <h2>Selected Continent:</h2>
                    <select id="combobox-continent" class="selectpicker"></select>
                    <h2>Score by:</h2>
                    <select id="combobox-uni-feature" class="selectpicker"></select>
                    <p>Save the selected points:</p>
                    <button type="button" class="btn btn-primary" id="export-button">Export table content to json</button>

                </div>
            </div>
            <div class="col-8">

                <div id="bar-chart-location"></div>
                <div id="bar-chart-universities"></div>
                <ul class="nav nav-tabs" id="myTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="text-tab" data-bs-toggle="tab" href="#text-content" role="tab"
                           aria-controls="text-content" aria-selected="true">Map</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="table-tab" data-bs-toggle="tab" href="#table-content" role="tab"
                           aria-controls="table-content" aria-selected="false">Table format</a>
                    </li>
                </ul>

                <div class="tab-content" id="myTabsContent">


                    <!-- Tab 1: Map Content -->
                    <div class="tab-pane fade show active" id="text-content" role="tabpanel" aria-labelledby="text-tab">
                        <div class="p-3">
                            <!-- Map content goes here -->
                            <div id="world-map"></div>
                        </div>
                    </div>

                    <!-- Tab 2: Table Content -->
                    <div class="tab-pane fade" id="table-content" role="tabpanel"
                         aria-labelledby="table-tab">
                        <div class="table-container">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped" id="university-table">
                                    <thead class="thead-dark"></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

        <hr class="my-4">
        <div class="row">
            <div class="col-4 sticky-column">
                <div class="sticky-top">
                    <h1>Countries comparison</h1>
                    <p>Explore and compare top universities from different countries effortlessly with our interactive
                        dashboard. Select two countries and a specific score type using intuitive combo boxes, and
                        instantly visualize the rankings in two dynamic bar charts. Stay informed about the best
                        universities in your chosen nations, empowering your education decisions.</p>
                    <h2>Select country 1:</h2>
                    <select id="combobox-country1" class="selectpicker"></select>
                    <h2>Select country 2:</h2>
                    <select id="combobox-country2" class="selectpicker"></select>
                    <h2>Score by:</h2>
                    <select id="combobox-uni-feature2" class="selectpicker"></select>
                </div>
            </div>
            <div class="col-8">
                <h2 id="header-country1"></h2>
                <div id="top-unis-chart1"></div>
                <h2 id="header-country2"></h2>
                <div id="top-unis-chart2"></div>
                <h2>University spendings</h2>
                <ul>
                    <li id="country1-text"></li>
                    <li id="country2-text"></li>
                </ul>
                <div id="uni-spendings-lineplot"></div>
                <h2>Uni Spend by country</h2>
                <div id="world-map-spending"></div>
            </div>
        </div>
        <hr class="my-4">
        <div class="row">
            <div class="col-4 sticky-column">
                <div class="sticky-top">
                    <h1>Countries</h1>
                    <p>Lorem ipsum</p>
                </div>
            </div>
            <div class="col-8">
                <select id="combobox-year" class="selectpicker"></select>
                <select id="combobox-feature1" class="selectpicker"></select>
                <select id="combobox-feature2" class="selectpicker"></select>
                <div id="country-scatter-plot"></div>
                <div id="country-scatter-plot2"></div>
                <div id="country-scatter-plot3"></div>
            </div>
        </div>
    </div>


    <script>
        const mainColor = "#007bff";
        const secondaryColor = "#542E71";
        const highlightColor = "#FF5714";
        const secondaryColor2 = "#9C9C9C";


        let universities = {{ universities | safe }};
        console.log(universities);
        let edu_spendings = {{ edu_spending | safe }};
        console.log("Edu Spending", edu_spendings);
        let uni_features = {{ uni_features | safe }};
        console.log(uni_features);
        let countries = {{ countries | safe }};
        console.log("Countries: ", countries);
        let country_features = {{ country_features | safe }};
        console.log("Country features: ", country_features);
        let years = {{ years | safe }};
        console.log("Years", years);
        let continents = {{ continents | safe }};
        console.log("Continents", continents);
        let locations = {{ locations | safe }};
        console.log("locations", locations);

    </script>

    <script src="../static/js/changeYear.js" type="text/javascript"></script>
    <script src="../static/js/universityRankings/ChangeUniFeatures.js" type="text/javascript"></script>
    <script src="../static/js/changeCountryFeatures.js" type="text/javascript"></script>
    <script src="../static/js/universityRankings/Charts.js" type="text/javascript"></script>

    <script src="../static/js/scatterPlots.js" type="text/javascript"></script>

    <script src="../static/js/universityComparison/changeLocations.js" type="text/javascript"></script>
    <script src="../static/js/universityComparison/horizontalBarCharts.js" type="text/javascript"></script>
    <script src="../static/js/universityComparison/spendingMap.js" type="text/javascript"></script>
    <script src="../static/js/universityComparison/linePlot.js" type="text/javascript"></script>
    <script src="../static/js/universityRankings/SaveData.js" type="text/javascript"></script>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.12/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}